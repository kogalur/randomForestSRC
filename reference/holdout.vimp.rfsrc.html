<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Hold out variable importance (VIMP) — holdout.vimp.rfsrc • Random Forests for Survival, Regression, and Classification</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Hold out variable importance (VIMP) — holdout.vimp.rfsrc" />
<meta property="og:description" content="Hold out VIMP is calculated from the error rate of mini ensembles of
  trees (blocks of trees) grown with and without a variable.  Applies to
  all families." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-000000-01"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-000000-01');
</script>


  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Random Forests for Survival, Regression, and Classification</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Development version">2.11.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/getstarted.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/getstarted.html">Getting Started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/rfsrc-introduction.html">Introduction</a>
    </li>
    <li>
      <a href="../articles/installation.html">Installing randomForestSRC</a>
    </li>
    <li>
      <a href="../articles/parallel.html">Speedup Random Forest Analyses</a>
    </li>
    <li>
      <a href="../articles/regression.html">Regression Problem</a>
    </li>
    <li>
      <a href="../articles/classification.html">Classification Problem</a>
    </li>
    <li>
      <a href="../articles/survival.html">Survival Problem</a>
    </li>
    <li>
      <a href="../articles/imbalance.html">Classifiers for Class Imbalanced Data</a>
    </li>
    <li>
      <a href="../articles/rfsrc-subsample.html">Variable Importance with Subsampling Inferences</a>
    </li>
    <li>
      <a href="../articles/partial.html">Partial Plot</a>
    </li>
    <li>
      <a href="../articles/trees.html">Inferences from Trees</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Manual</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="https://github.com/kogalur/randomForestSRC/issues">Bug Reporting</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/kogalur/randomForestSRC/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Hold out variable importance (VIMP)</h1>
    
    <div class="hidden name"><code>holdout.vimp.rfsrc.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Hold out VIMP is calculated from the error rate of mini ensembles of
  trees (blocks of trees) grown with and without a variable.  Applies to
  all families.</p>
    </div>

    <pre class="usage"><span class='fu'>holdout.vimp</span><span class='op'>(</span><span class='va'>formula</span>, <span class='va'>data</span>,
  ntree <span class='op'>=</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>p</span>, <span class='va'>vtry</span><span class='op'>)</span><span class='op'>{</span><span class='fl'>1000</span> <span class='op'>*</span> <span class='va'>p</span> <span class='op'>/</span> <span class='va'>vtry</span><span class='op'>}</span>,
  nsplit <span class='op'>=</span> <span class='fl'>10</span>,
  ntime <span class='op'>=</span> <span class='fl'>50</span>,
  sampsize <span class='op'>=</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span><span class='op'>{</span><span class='va'>x</span> <span class='op'>*</span> <span class='fl'>.632</span><span class='op'>}</span>,
  samptype <span class='op'>=</span> <span class='st'>"swor"</span>,
  block.size <span class='op'>=</span> <span class='fl'>10</span>,
  vtry <span class='op'>=</span> <span class='fl'>1</span>,
  <span class='va'>...</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>formula</th>
      <td><p>A symbolic description of the model to be fit.</p></td>
    </tr>
    <tr>
      <th>data</th>
      <td><p>Data frame containing the y-outcome and x-variables.</p></td>
    </tr>
    <tr>
      <th>ntree</th>
      <td><p>Function specifying requested number of trees used for
    growing the forest.  Inputs are dimension and number of holdout
    variables. The requested number of trees can also be a number.</p></td>
    </tr>
    <tr>
      <th>nsplit</th>
      <td><p>Non-negative integer value specifying number of
    random split points used to split a node (deterministic splitting
    corresponds to the value zero and is much slower).</p></td>
    </tr>
    <tr>
      <th>ntime</th>
      <td><p>Integer value used for survival to
    constrain ensemble calculations to a grid of <code>ntime</code> time points.</p></td>
    </tr>
    <tr>
      <th>sampsize</th>
      <td><p>Function specifying size of subsampled data. Can also
    be a number.</p></td>
    </tr>
    <tr>
      <th>samptype</th>
      <td><p>Type of bootstrap used.</p></td>
    </tr>
    <tr>
      <th>vtry</th>
      <td><p>Number of variables randomly selected to be held out when
    growing a tree.  This can also be set to a list for a targeted hold
    out VIMP analysis.  See details below for more information.</p></td>
    </tr>
    <tr>
      <th>block.size</th>
      <td><p>Specifies number of trees in a block when calculating
    holdout variable importance.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Further arguments to be passed to <code><a href='rfsrc.html'>rfsrc</a></code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    

<p>Holdout variable importance (holdout VIMP) is based on comparing the
  results of two mini forests of trees (blocks of trees), the first in
  which a random set of <code>vtry</code> features are held out (the holdout
  forest), and the second in which no features are held out (the
  baseline forest).  The mini forests are constructed from blocks of
  trees, where if the block size is one, then this is similar to the
  idea of Breiman-Cutler which calculates permuation VIMP using one tree
  at a time.</p>
<p>If a feature is held out in a block of trees, we refer to this as the
  (feature, block) pair.  The bootstrap for the trees in a (feature,
  block) pair are identical in both forests. That is, the holdout block
  is grow by holding out the feature, and the baseline block is grown
  over the same trees, with the same bootstrap, but without holding out
  any features.  <code>vtry</code> controls how many features are held out in
  every tree. If set to one (default), only one variable is held out in
  every tree.  Once a (feature, block) of trees has been grown, holdout
  VIMP for a given variable v is calculated as follows.  Gather the
  block of trees where the feature was held out (from the holdout
  forest) and calculate OOB prediction error.  Next gather the
  corresponding block of trees where v was not held out (from the
  baseline forest) and calculate OOB prediction error.  Holdout VIMP for
  the (feature, block) pair is the difference between these two values.
  The final holdout VIMP estimate for a feature v is obtained by averaging
  holdout VIMP for (feature=v, block) over all blocks.</p>
<p>To summarize, holdout VIMP measures the importance of a variable when
  that variable is truly removed from growing the tree.</p>
<p>Accuracy of hold out VIMP depends critically on total number of trees.
  If total number of trees is too small, then number of times a variable
  is held out will be small and OOB error can suffer from high variance.
  Therefore, <code>ntree</code> should be set fairly high - we recommend using
  1000 times the number of features.  Increasing <code>vtry</code> is another
  way to increase number of times a variable is held out and therefore
  reduces the burden of growing a large number of trees.  In particular,
  total number of trees needed decreases linearly with <code>vtry</code>.  The
  default <code>ntree</code> equals 1000 trees for each feature divided by
  <code>vtry</code>.  Keep in mind intrepretation of holdout VIMP is altered
  when <code>vtry</code> is different than one.  Thus this option should be
  used with caution.</p>
<p>Accuracy also depends on the value of <code>blocksize</code>.  Smaller
  values generally produce better results but are more computationally
  demanding.  The value of <code>blocksize</code> should not exceed
  <code>ntree</code> divided by number of features, otherwise there may not be
  enough trees to satisify the target block size for a feature and
  missing values will result.</p>
<p>Finally, we note that a targeted hold out VIMP analysis can be
  requested by setting <code>vtry</code> to a list with two entries.  The
  first entry is a vector of integer values specifying the variables of
  interest.  The second entry is a boolean logical flag indicating
  whether individual or joint VIMP should be calculated.  For example,
  suppose variables 1, 4 and 5 are our variables of interest.  To
  calculate holdout VIMP for these variables, and these variables only,
  <code>vtry</code> would be specified by</p>
<p>vtry = list(xvar = c(1, 4, 5), joint = FALSE)</p>
<p>On the other hand, if we are interested in the joint effect when we
   remove the three variables simultaneously, then</p>
<p>vtry = list(xvar = c(1, 4, 5), joint = TRUE)</p>
<p>The benefits of a targeted analysis is that the user may have a
   pre-conceived idea of which variables are interesting.  Only VIMP for
   these variables will be calculated which greatly reduces
   computational time.  Another benefit is that when joint VIMP is
   requested, this provides the user with a way to assess importance of
   specific groups of variables.  See the iris example below for
   illustration.</p>


    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Invisibly a list with the following components (which themselves can be lists):</p>
<dt>importance</dt><dd><p>Holdout VIMP.</p></dd>
  <dt>baseline</dt><dd><p>Prediction error for the baseline forest.</p></dd>
  <dt>holdout</dt><dd><p>Prediction error for the holdout forest.</p></dd>

    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Hemant Ishwaran and Udaya B. Kogalur</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    

<p>Lu M. and Ishwaran H. (2018). Expert Opinion: A prediction-based
  alternative to p-values in regression models. <em>J. Thoracic and
    Cardiovascular Surgery</em>, 155(3), 1130--1136.</p>


    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code class='command'><a href='vimp.rfsrc.html'>vimp.rfsrc</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='co'># \donttest{</span>


<span class='co'>## ------------------------------------------------------------</span>
<span class='co'>## regression analysis</span>
<span class='co'>## ------------------------------------------------------------</span>

<span class='co'>## new York air quality measurements</span>
<span class='va'>airq.obj</span> <span class='op'>&lt;-</span> <span class='fu'>holdout.vimp</span><span class='op'>(</span><span class='va'>Ozone</span> <span class='op'>~</span> <span class='va'>.</span>, data <span class='op'>=</span> <span class='va'>airquality</span>, na.action <span class='op'>=</span> <span class='st'>"na.impute"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>airq.obj</span><span class='op'>$</span><span class='va'>importance</span><span class='op'>)</span>

<span class='co'>## ------------------------------------------------------------</span>
<span class='co'>## classification analysis</span>
<span class='co'>## ------------------------------------------------------------</span>

<span class='co'>## iris data</span>
<span class='va'>iris.obj</span> <span class='op'>&lt;-</span> <span class='fu'>holdout.vimp</span><span class='op'>(</span><span class='va'>Species</span> <span class='op'>~</span><span class='va'>.</span>, data <span class='op'>=</span> <span class='va'>iris</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>iris.obj</span><span class='op'>$</span><span class='va'>importance</span><span class='op'>)</span>

<span class='co'>## iris data using brier prediction error</span>
<span class='va'>iris.obj</span> <span class='op'>&lt;-</span> <span class='fu'>holdout.vimp</span><span class='op'>(</span><span class='va'>Species</span> <span class='op'>~</span><span class='va'>.</span>, data <span class='op'>=</span> <span class='va'>iris</span>, perf.type <span class='op'>=</span> <span class='st'>"brier"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>iris.obj</span><span class='op'>$</span><span class='va'>importance</span><span class='op'>)</span>

<span class='co'>## ------------------------------------------------------------</span>
<span class='co'>## illustration of targeted holdout vimp analysis</span>
<span class='co'>## ------------------------------------------------------------</span>

<span class='co'>## iris data - only interested in variables 3 and 4</span>
<span class='va'>vtry</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>xvar <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>3</span>, <span class='fl'>4</span><span class='op'>)</span>, joint <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='fu'>holdout.vimp</span><span class='op'>(</span><span class='va'>Species</span> <span class='op'>~</span><span class='va'>.</span>, data <span class='op'>=</span> <span class='va'>iris</span>, vtry <span class='op'>=</span> <span class='va'>vtry</span><span class='op'>)</span><span class='op'>$</span><span class='va'>impor</span><span class='op'>)</span>

<span class='co'>## iris data - joint importance of variables 3 and 4</span>
<span class='va'>vtry</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>xvar <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>3</span>, <span class='fl'>4</span><span class='op'>)</span>, joint <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='fu'>holdout.vimp</span><span class='op'>(</span><span class='va'>Species</span> <span class='op'>~</span><span class='va'>.</span>, data <span class='op'>=</span> <span class='va'>iris</span>, vtry <span class='op'>=</span> <span class='va'>vtry</span><span class='op'>)</span><span class='op'>$</span><span class='va'>impor</span><span class='op'>)</span>

<span class='co'>## iris data - joint importance of variables 1 and 2</span>
<span class='va'>vtry</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>xvar <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>2</span><span class='op'>)</span>, joint <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='fu'>holdout.vimp</span><span class='op'>(</span><span class='va'>Species</span> <span class='op'>~</span><span class='va'>.</span>, data <span class='op'>=</span> <span class='va'>iris</span>, vtry <span class='op'>=</span> <span class='va'>vtry</span><span class='op'>)</span><span class='op'>$</span><span class='va'>impor</span><span class='op'>)</span>


<span class='co'>## ------------------------------------------------------------</span>
<span class='co'>## imbalanced classification (using RFQ)</span>
<span class='co'>## ------------------------------------------------------------</span>

<span class='kw'>if</span> <span class='op'>(</span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='st'><a href='https://github.com/topepo/caret/'>"caret"</a></span>, logical.return <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>{</span>

  <span class='co'>## experimental settings</span>
  <span class='va'>n</span> <span class='op'>&lt;-</span> <span class='fl'>400</span>
  <span class='va'>q</span> <span class='op'>&lt;-</span> <span class='fl'>20</span>
  <span class='va'>ir</span> <span class='op'>&lt;-</span> <span class='fl'>6</span>
  <span class='va'>f</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/formula.html'>as.formula</a></span><span class='op'>(</span><span class='va'>Class</span> <span class='op'>~</span> <span class='va'>.</span><span class='op'>)</span>

  <span class='co'>## simulate the data, create minority class data</span>
  <span class='va'>d</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/caret/man/twoClassSim.html'>twoClassSim</a></span><span class='op'>(</span><span class='va'>n</span>, linearVars <span class='op'>=</span> <span class='fl'>15</span>, noiseVars <span class='op'>=</span> <span class='va'>q</span><span class='op'>)</span>
  <span class='va'>d</span><span class='op'>$</span><span class='va'>Class</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/numeric.html'>as.numeric</a></span><span class='op'>(</span><span class='va'>d</span><span class='op'>$</span><span class='va'>Class</span><span class='op'>)</span> <span class='op'>-</span> <span class='fl'>1</span><span class='op'>)</span>
  <span class='va'>idx.0</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/which.html'>which</a></span><span class='op'>(</span><span class='va'>d</span><span class='op'>$</span><span class='va'>Class</span> <span class='op'>==</span> <span class='fl'>0</span><span class='op'>)</span>
  <span class='va'>idx.1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/which.html'>which</a></span><span class='op'>(</span><span class='va'>d</span><span class='op'>$</span><span class='va'>Class</span> <span class='op'>==</span> <span class='fl'>1</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='va'>d</span><span class='op'>$</span><span class='va'>Class</span> <span class='op'>==</span> <span class='fl'>1</span><span class='op'>)</span> <span class='op'>/</span> <span class='va'>ir</span> , replace <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
  <span class='va'>d</span> <span class='op'>&lt;-</span> <span class='va'>d</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>idx.0</span>,<span class='va'>idx.1</span><span class='op'>)</span>,, drop <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>]</span>

  <span class='co'>## VIMP for RFQ with and without blocking</span>
  <span class='va'>vmp1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='imbalanced.rfsrc.html'>imbalanced</a></span><span class='op'>(</span><span class='va'>f</span>, <span class='va'>d</span>, importance <span class='op'>=</span> <span class='cn'>TRUE</span>, block.size <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span><span class='op'>$</span><span class='va'>importance</span><span class='op'>[</span>, <span class='fl'>1</span><span class='op'>]</span>
  <span class='va'>vmp10</span> <span class='op'>&lt;-</span> <span class='fu'><a href='imbalanced.rfsrc.html'>imbalanced</a></span><span class='op'>(</span><span class='va'>f</span>, <span class='va'>d</span>, importance <span class='op'>=</span> <span class='cn'>TRUE</span>, block.size <span class='op'>=</span> <span class='fl'>10</span><span class='op'>)</span><span class='op'>$</span><span class='va'>importance</span><span class='op'>[</span>, <span class='fl'>1</span><span class='op'>]</span>

  <span class='co'>## holdout VIMP for RFQ with and without blocking</span>
  <span class='va'>hvmp1</span> <span class='op'>&lt;-</span> <span class='fu'>holdout.vimp</span><span class='op'>(</span><span class='va'>f</span>, <span class='va'>d</span>, rfq <span class='op'>=</span>  <span class='cn'>TRUE</span>,
               perf.type <span class='op'>=</span> <span class='st'>"g.mean"</span>, block.size <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span><span class='op'>$</span><span class='va'>importance</span><span class='op'>[</span>, <span class='fl'>1</span><span class='op'>]</span>
  <span class='va'>hvmp10</span> <span class='op'>&lt;-</span> <span class='fu'>holdout.vimp</span><span class='op'>(</span><span class='va'>f</span>, <span class='va'>d</span>, rfq <span class='op'>=</span>  <span class='cn'>TRUE</span>,
               perf.type <span class='op'>=</span> <span class='st'>"g.mean"</span>, block.size <span class='op'>=</span> <span class='fl'>10</span><span class='op'>)</span><span class='op'>$</span><span class='va'>importance</span><span class='op'>[</span>, <span class='fl'>1</span><span class='op'>]</span>

  <span class='co'>## compare VIMP values</span>
  <span class='va'>imp</span> <span class='op'>&lt;-</span> <span class='fl'>100</span> <span class='op'>*</span> <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>cbind</a></span><span class='op'>(</span><span class='va'>vmp1</span>, <span class='va'>vmp10</span>, <span class='va'>hvmp1</span>, <span class='va'>hvmp10</span><span class='op'>)</span>
  <span class='va'>legn</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"vimp-1"</span>, <span class='st'>"vimp-10"</span>,<span class='st'>"hvimp-1"</span>, <span class='st'>"hvimp-10"</span><span class='op'>)</span>
  <span class='va'>colr</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>4</span>,<span class='fl'>20</span><span class='op'>+</span><span class='va'>q</span><span class='op'>)</span>
  <span class='va'>colr</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>20</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='fl'>2</span>
  <span class='va'>ylim</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/range.html'>range</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>imp</span><span class='op'>)</span><span class='op'>)</span>
  <span class='va'>nms</span> <span class='op'>&lt;-</span> <span class='fl'>1</span><span class='op'>:</span><span class='op'>(</span><span class='fl'>20</span><span class='op'>+</span><span class='va'>q</span><span class='op'>)</span>
  <span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>mfrow<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>
  <span class='fu'><a href='https://rdrr.io/r/graphics/barplot.html'>barplot</a></span><span class='op'>(</span><span class='va'>imp</span><span class='op'>[</span>,<span class='fl'>1</span><span class='op'>]</span>,col<span class='op'>=</span><span class='va'>colr</span>,las<span class='op'>=</span><span class='fl'>2</span>,main<span class='op'>=</span><span class='va'>legn</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span>,ylim<span class='op'>=</span><span class='va'>ylim</span>,names.arg<span class='op'>=</span><span class='va'>nms</span><span class='op'>)</span>
  <span class='fu'><a href='https://rdrr.io/r/graphics/barplot.html'>barplot</a></span><span class='op'>(</span><span class='va'>imp</span><span class='op'>[</span>,<span class='fl'>2</span><span class='op'>]</span>,col<span class='op'>=</span><span class='va'>colr</span>,las<span class='op'>=</span><span class='fl'>2</span>,main<span class='op'>=</span><span class='va'>legn</span><span class='op'>[</span><span class='fl'>2</span><span class='op'>]</span>,ylim<span class='op'>=</span><span class='va'>ylim</span>,names.arg<span class='op'>=</span><span class='va'>nms</span><span class='op'>)</span>
  <span class='fu'><a href='https://rdrr.io/r/graphics/barplot.html'>barplot</a></span><span class='op'>(</span><span class='va'>imp</span><span class='op'>[</span>,<span class='fl'>3</span><span class='op'>]</span>,col<span class='op'>=</span><span class='va'>colr</span>,las<span class='op'>=</span><span class='fl'>2</span>,main<span class='op'>=</span><span class='va'>legn</span><span class='op'>[</span><span class='fl'>3</span><span class='op'>]</span>,ylim<span class='op'>=</span><span class='va'>ylim</span>,names.arg<span class='op'>=</span><span class='va'>nms</span><span class='op'>)</span>
  <span class='fu'><a href='https://rdrr.io/r/graphics/barplot.html'>barplot</a></span><span class='op'>(</span><span class='va'>imp</span><span class='op'>[</span>,<span class='fl'>4</span><span class='op'>]</span>,col<span class='op'>=</span><span class='va'>colr</span>,las<span class='op'>=</span><span class='fl'>2</span>,main<span class='op'>=</span><span class='va'>legn</span><span class='op'>[</span><span class='fl'>4</span><span class='op'>]</span>,ylim<span class='op'>=</span><span class='va'>ylim</span>,names.arg<span class='op'>=</span><span class='va'>nms</span><span class='op'>)</span>

<span class='op'>}</span>

<span class='co'>## ------------------------------------------------------------</span>
<span class='co'>## multivariate regression analysis</span>
<span class='co'>## ------------------------------------------------------------</span>
<span class='va'>mtcars.mreg</span> <span class='op'>&lt;-</span> <span class='fu'>holdout.vimp</span><span class='op'>(</span><span class='fu'>Multivar</span><span class='op'>(</span><span class='va'>mpg</span>, <span class='va'>cyl</span><span class='op'>)</span> <span class='op'>~</span><span class='va'>.</span>, data <span class='op'>=</span> <span class='va'>mtcars</span>,
                                    vtry <span class='op'>=</span> <span class='fl'>3</span>,
                                    block.size <span class='op'>=</span> <span class='fl'>1</span>,
                                    samptype <span class='op'>=</span> <span class='st'>"swr"</span>,
                                    sampsize <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span><span class='op'>(</span><span class='va'>mtcars</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>mtcars.mreg</span><span class='op'>$</span><span class='va'>importance</span><span class='op'>)</span>

<span class='co'>## ------------------------------------------------------------</span>
<span class='co'>## mixed outcomes analysis</span>
<span class='co'>## ------------------------------------------------------------</span>

<span class='va'>mtcars.new</span> <span class='op'>&lt;-</span> <span class='va'>mtcars</span>
<span class='va'>mtcars.new</span><span class='op'>$</span><span class='va'>cyl</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='va'>mtcars.new</span><span class='op'>$</span><span class='va'>cyl</span><span class='op'>)</span>
<span class='va'>mtcars.new</span><span class='op'>$</span><span class='va'>carb</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='va'>mtcars.new</span><span class='op'>$</span><span class='va'>carb</span>, ordered <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='va'>mtcars.mix</span> <span class='op'>&lt;-</span> <span class='fu'>holdout.vimp</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>cbind</a></span><span class='op'>(</span><span class='va'>carb</span>, <span class='va'>mpg</span>, <span class='va'>cyl</span><span class='op'>)</span> <span class='op'>~</span><span class='va'>.</span>, data <span class='op'>=</span> <span class='va'>mtcars.new</span>,
                                   ntree <span class='op'>=</span> <span class='fl'>100</span>,
                                   block.size <span class='op'>=</span> <span class='fl'>2</span>,
                                   vtry <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>mtcars.mix</span><span class='op'>$</span><span class='va'>importance</span><span class='op'>)</span>

<span class='co'>##------------------------------------------------------------</span>
<span class='co'>## survival analysis</span>
<span class='co'>##------------------------------------------------------------</span>

<span class='co'>## Primary biliary cirrhosis (PBC) of the liver</span>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>pbc</span>, package <span class='op'>=</span> <span class='st'>"randomForestSRC"</span><span class='op'>)</span>
<span class='va'>pbc.obj</span> <span class='op'>&lt;-</span> <span class='fu'>holdout.vimp</span><span class='op'>(</span><span class='fu'>Surv</span><span class='op'>(</span><span class='va'>days</span>, <span class='va'>status</span><span class='op'>)</span> <span class='op'>~</span> <span class='va'>.</span>, <span class='va'>pbc</span>,
                                nsplit <span class='op'>=</span> <span class='fl'>10</span>,
                                ntree <span class='op'>=</span> <span class='fl'>1000</span>,
                                na.action <span class='op'>=</span> <span class='st'>"na.impute"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>pbc.obj</span><span class='op'>$</span><span class='va'>importance</span><span class='op'>)</span>

<span class='co'>##------------------------------------------------------------</span>
<span class='co'>## competing risks</span>
<span class='co'>##------------------------------------------------------------</span>

<span class='co'>## WIHS analysis</span>
<span class='co'>## cumulative incidence function (CIF) for HAART and AIDS stratified by IDU</span>

<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>wihs</span>, package <span class='op'>=</span> <span class='st'>"randomForestSRC"</span><span class='op'>)</span>
<span class='va'>wihs.obj</span> <span class='op'>&lt;-</span> <span class='fu'>holdout.vimp</span><span class='op'>(</span><span class='fu'>Surv</span><span class='op'>(</span><span class='va'>time</span>, <span class='va'>status</span><span class='op'>)</span> <span class='op'>~</span> <span class='va'>.</span>, <span class='va'>wihs</span>,
                                 nsplit <span class='op'>=</span> <span class='fl'>3</span>,
                                 ntree <span class='op'>=</span> <span class='fl'>100</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>wihs.obj</span><span class='op'>$</span><span class='va'>importance</span><span class='op'>)</span>

<span class='co'># }</span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Min Lu.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


